<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Nevis</title>
    <link rel="stylesheet" type="text/css" href="styles.css" />
</head>

<body>
    <header>
        <img src="./Nevis Logo.png" id="logo" />
        <p>Nevis</p>
        <a id="close" href="javascript:window.close()">
            <svg color="white" width="10" height="10">
                <path d="M 0,0 0,0.7 4.3,5 0,9.3 0,10 0.7,10 5,5.7 9.3,10 10,10 10,9.3 5.7,5 10,0.7 10,0 9.3,0 5,4.3 0.7,0 Z"></path>
            </svg>
        </a>
        <a id="maximize">
            <svg color="white" id="icon-min" width="10" height="10">
                <path d="M 0,0 0,10 10,10 10,0 Z M 1,1 9,1 9,9 1,9 Z"></path>
            </svg>
            <svg color="white" id="icon-max" width="10" height="10">
                <path d="m 2,1e-5 0,2 -2,0 0,8 8,0 0,-2 2,0 0,-8 z m 1,1 6,0 0,6 -1,0 0,-5 -5,0 z m -2,2 6,0 0,6 -6,0 z"></path>
            </svg>
        </a>
        <a id="minimize">
            <svg color="white" width="10" height="10">
                <path d="M 0,5 10,5 10,6 0,6 Z"></path>
            </svg>
        </a>
    </header>


    <main>
        <div id="menu-panel">
            <div id="main-menu">
                <p id="menu-download">Download</p>
                <p id="menu-entries">Entries</p>
                <p id="menu-results">Results</p>
                <p id="menu-courses">Courses</p>
                <p id="menu-about">About</p>
            </div>
            <div id="scroll-menu">
                <div id="download-menu" style="display:none;">
                    <p class="label">Port:</p>
                    <div id='port'>
                        <p id="port-content" class="content"></p>
                        <svg fill="#000000" viewBox="0 0 24 24" width="20">
                            <path d="M7.41 7.84L12 12.42l4.59-4.58L18 9.25l-6 6-6-6z" />
                            <path d="M0-.75h24v24H0z" fill="none" />
                        </svg>

                    </div>
                    <div id="port-menu" class="hidden">

                    </div>
                    <p class="label">Baud Rate:</p>
                    <div id="baud">
                        <p id="baud-content" class="content">4800</p>
                        <svg fill="#000000" viewBox="0 0 24 24" width="20">
                            <path d="M7.41 7.84L12 12.42l4.59-4.58L18 9.25l-6 6-6-6z" />
                            <path d="M0-.75h24v24H0z" fill="none" />
                        </svg>

                    </div>
                    <div id="baud-menu" class="hidden">
                        <p id="baud-serial">4800 (Serial)</p>
                        <p id="baud-usb">38400 (USB)</p>
                    </div>

                    <button id="connect">Connect</button>

                </div>
                <div id="entries-menu" style="display:none;">
                    <button id="entries-submit">Add Entry</button>
                </div>
                <div id='back' style="display:none;">
                    <button id='back-button'>Back</button>
                </div>
            </div>
        </div>
        <div id="scroll">
            <div id="download-output" style="display:none;">
            </div>
            <div id="entries" style="display:none;">
                <form>
                    <div class="text-input">
                        <input id="entries-name" type="text" required/>
                        <label for="entries-name">Name</label>
                    </div>
                    <div class="text-input">
                        <input id="entries-siid" max="9999999" type="text" required/>
                        <label for="entries-siid">SI Number</label>
                    </div>
                    <div class="text-input">
                        <input id="entries-age-class" pattern="[MW]{1}[0-9]{2}" type="text" required/>
                        <label for="entries-age-class">Age Class</label>
                    </div>
                    <div class="text-input">
                        <input id="entries-club" type="text" required/>
                        <label for="entries-club">Club</label>
                    </div>
                    <div class="text-input">
                        <input id="entries-course" type="text" required/>
                        <label for="entries-course">Course</label>
                    </div>
                    <div class="checkbox-input">
                        <label for="entries-nc">Non-Competitive?
                            <input id="entries-nc" type="checkbox" required/>
                            <span for="entries-nc" />
                        </label>
                    </div>
                </form>

            </div>
            <div id="about" style="display:none;">
                <h2>About</h2>
                <p>
                    Nevis a fast, easy, stress free way to manage timing of sporting events using the SportIdent timing system. Nevis is software
                    to allow you to download the download from SportIdent cards into results. It can manage entries, courses
                    and results and is designed to be used for small orienteering events. It is opensource and al code is
                    avaiable on Github.
                </p>
                <p>Nevis is in no way related or endorsed by SportIdent. To find out about SportIdent go to their website: sportident.com</p>

                <h2>Help</h2>
                <p>Basic help at some point may be avaliable at: https://github.com/bonalybob/Nevis</p>

                <h2>System</h2>
                <p>Nevis Version: 2.0.0</p>
                <p> Node Version:
                    <script>document.write(process.versions.node)</script> </p>
                <p>Chrome Version:
                    <script>document.write(process.versions.chrome)</script> </p>
                <p>Electron Version:
                    <script>document.write(process.versions.electron)</script>
                </p>

                <h2>Credits</h2>
                <h4>CRC Algorithm from opensportident</h4>
                <p>MIT License - https://github.com/angexis/opensportident.js/blob/master/LICENSE</p>
                <p>
                    Copyright
                    <br/> (c) 2016 Jan Vorwerk Copyright
                    <br/>(c) 2013 Simon Denier
                </p>

                <h4> Serialport </h4>
                <p> MIT License - https://github.com/node-serialport/node-serialport/blob/master/LICENSE</p>
                <p> Copyright (c) 2010 Christopher Williams. All rights reserved. </p>

                <h4> Electron </h4>
                <p> MIT License - https://github.com/electron/electron/blob/master/LICENSE</p>
                <p>Copyright (c) 2013-2017 GitHub Inc. </p>

                <h4> Material Design Icons </h4>
                <p> Apache 2.0 License - https://github.com/google/material-design-icons/blob/master/LICENSE</p>


                <h4> LokiJS </h4>
                <p> MIT License - https://github.com/techfort/LokiJS/blob/master/LICENSE.txt</p>
                <p>Copyright (c) 2015 TechFort</p>


                <h4> Crypto-JS</h4>
                <p> MIT License - https://github.com/brix/crypto-js/blob/develop/LICENSE</p>
                <p>Copyright
                    <br/>(c) 2009-2013 Jeff Mott Copyright
                    <br/>(c) 2013-2016 Evan Vosberg</p>
                <h2>License</h2>
                <h3> MIT License</h3>
                <p>
                    Copyright (c) 2017 Bonalybob
                </p>
                <p>
                    Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation
                    files (the " Software "), to deal in the Software without restriction, including without limitation the
                    rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software,
                    and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
                    The above copyright notice and this permission notice shall be included in all copies or substantial
                    portions of the Software.
                </p>
                <p>
                    THE SOFTWARE IS PROVIDED "AS IS ", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
                    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS
                    OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
                    TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
                    IN THE SOFTWARE.
                </p>


            </div>
        </div>
    </main>

    <script>
        const ipc = require('electron').ipcRenderer

        /* ----- Window Commands & Icons ----- */
        // Title Bar (Max and Min) + Scrollbar

        document.getElementById('icon-min').setAttribute('style', 'display:inline');
        document.getElementById('icon-max').setAttribute('style', 'display:none');

        document.getElementById('maximize').addEventListener('click', function () {
            ipc.send('window', 'maximize')
        })

        document.getElementById('minimize').addEventListener('click', function () {
            ipc.send('window', 'minimize')
        })

        ipc.on('window', function (event, arg) {
            if (arg == 'minimized') {
                document.getElementById('icon-min').setAttribute('style', 'display:inline')
                document.getElementById('icon-max').setAttribute('style', 'display:none')
            }
            else if (arg == 'maximized') {
                document.getElementById('icon-min').setAttribute('style', 'display:none')
                document.getElementById('icon-max').setAttribute('style', 'display:inline')
            }
        })

        ipc.on('resize', function (event, arg) {
            var pixels = arg[1] - 30
            var minusBackButtonPixels = pixels - 45
            document.getElementById('scroll').setAttribute('style', "height: " + pixels + "px ")
            document.getElementById('scroll-menu').setAttribute('style', "height: " + minusBackButtonPixels + "px ")
        })

        //Main Menu
        require('./main-menu.js')

        //Download Page
        require('./downloads.js')

        //Entries Page
        require('./entries.js')
    </script>
</body>

</html>