<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Nevis</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
</head>

<body>
    <header>
        <img src="./Nevis Logo.png" />
        <p>Nevis</p>
        <a id="close" href="javascript:window.close()">
            <svg color="white" width="10" height="10">
                <path d="M 0,0 0,0.7 4.3,5 0,9.3 0,10 0.7,10 5,5.7 9.3,10 10,10 10,9.3 5.7,5 10,0.7 10,0 9.3,0 5,4.3 0.7,0 Z"></path>
            </svg>
        </a>
        <a id="maximize">
            <svg color="white" id="icon-min" width="10" height="10">
                <path d="M 0,0 0,10 10,10 10,0 Z M 1,1 9,1 9,9 1,9 Z"></path>
            </svg>
            <svg color="white" id="icon-max" width="10" height="10">
                <path d="m 2,1e-5 0,2 -2,0 0,8 8,0 0,-2 2,0 0,-8 z m 1,1 6,0 0,6 -1,0 0,-5 -5,0 z m -2,2 6,0 0,6 -6,0 z"></path>
            </svg>
        </a>
        <a id="minimize">
            <svg color="white" width="10" height="10">
                <path d="M 0,5 10,5 10,6 0,6 Z"></path>
            </svg>
        </a>

    </header>
    <div id="scroll">
        <main>

            <div id="connection-details">

                <button id="connect">Connect</button>
            </div>
            <p id="download-output">
                Download
            </p>

        </main>
    </div>
    <script>
        const ipc = require('electron').ipcRenderer


        // Window Commands & Icons

        document.getElementById('icon-min').setAttribute('style', 'display:inline')
        document.getElementById('icon-max').setAttribute('style', 'display:none')

        document.getElementById('maximize').addEventListener('click', function () {
            ipc.send('window', 'maximize')
        })
        document.getElementById('minimize').addEventListener('click', function () {
            ipc.send('window', 'minimize')
        })
        ipc.on('connected', function (event, arg) {
            const message = `${arg}`
            document.getElementById('data').innerHTML = message
        })
        ipc.on('window', function (event, arg) {
            if (arg == 'minimized') {
                document.getElementById('icon-min').setAttribute('style', 'display:inline')
                document.getElementById('icon-max').setAttribute('style', 'display:none')
            }
            else if (arg == 'maximized') {
                document.getElementById('icon-min').setAttribute('style', 'display:none')
                document.getElementById('icon-max').setAttribute('style', 'display:inline')
            }
        })
        ipc.on('resize', function (event, arg) {
            var pixels = arg[1] - 30
            document.getElementById('scroll').setAttribute('style', "height:" + pixels + "px")

        })
        var sp = require('serialport');

        sp.list(function (err, ports) {
            console.log(ports);
        });
        console.log(process.versions.node)
    </script>
</body>

</html>