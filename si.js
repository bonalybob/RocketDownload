var SerialPort = require('serialport');

var readSi5 = new Buffer([0xFF, 0x02, 0xB1, 0x00, 0xB1, 0x00, 0x03]);

var readSi10_Block0 = new Buffer([0xFF, 0x02, 0xEF, 0x01, 0x00, 0xE2, 0x09, 0x03])
var readSi10_Block1 = new Buffer([0xFF, 0x02, 0xEF, 0x01, 0x01, 0xE3, 0x09, 0x03])
var readSi10_Block2 = new Buffer([0xFF, 0x02, 0xEF, 0x01, 0x02, 0xE0, 0x09, 0x03])
var readSi10_Block3 = new Buffer([0xFF, 0x02, 0xEF, 0x01, 0x03, 0xE1, 0x09, 0x03])
var readSi10_Block4 = new Buffer([0xFF, 0x02, 0xEF, 0x01, 0x04, 0xE6, 0x09, 0x03])
var readSi10_Block5 = new Buffer([0xFF, 0x02, 0xEF, 0x01, 0x05, 0xE7, 0x09, 0x03])
var readSi10_Block6 = new Buffer([0xFF, 0x02, 0xEF, 0x01, 0x06, 0xE4, 0x09, 0x03])
var readSi10_Block7 = new Buffer([0xFF, 0x02, 0xEF, 0x01, 0x07, 0xE5, 0x09, 0x03])

var beep = new Buffer([0xFF, 0x06]);

function calculateSIID(byte0, byte1, byte2, byte3) {
    siid = parseInt(byte0 + byte1 + byte2 + byte3, 16)
    // SI Card 5
    if ((byte0 == 0x00) && (byte1 == 0x01)) {
        siid = siid - 65537
    }
    else if ((byte0 == 0x00) && (byte1 == 0x02)) {
        siid = siid + 68928
    }
    else if ((byte0 == 0x00) && (byte1 == 0x03)) {
        siid = siid + 103392
    }
    else if ((byte0 == 0x00) && (byte1 == 0x04)) {
        siid = siid + 137856
    }
    else if ((siid >= 259658240) && (siid <= 261658239)) {
        siid = siid - 251658240
    }

    return siid
}

function calculateTime(start, finish) {
    time_raw = finishtime - starttime
    time_minutes = (time_raw - (time_raw % 60)) / 60
    time_seconds = time_raw % 60
    return [time_minutes, time_seconds, time_raw]
}
